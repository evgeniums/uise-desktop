CMAKE_MINIMUM_REQUIRED (VERSION 3.16)
PROJECT(uise-desktop VERSION 0.0.1 LANGUAGES CXX)

SET(CMAKE_CXX_STANDARD 17)
SET(CMAKE_CXX_STANDARD_REQUIRED ON)

SET(CMAKE_AUTOMOC ON)
SET(CMAKE_AUTORCC ON)
SET(CMAKE_AUTOUIC ON)

FIND_PACKAGE(Qt6 COMPONENTS Widgets REQUIRED)

OPTION(UISE_DESKTOP_STATIC "Build static uise-desktop library" OFF)
OPTION(UISE_DESKTOP_DEMO "Build demo appliations using uise-desktop UI" ON)

INCLUDE_DIRECTORIES(${INCLUDE_DIRECTORIES} ${CMAKE_CURRENT_SOURCE_DIR}/include)

SET (HEADERS
    include/uise/desktop/uisedesktop.hpp
    include/uise/desktop/version.hpp
    include/uise/desktop/flyweightlistview.hpp
)

SET (SOURCES
    src/flyweightlistview.cpp
)

IF (UISE_DESKTOP_STATIC)
    MESSAGE(STATUS "Building static uise-desktop library")
    ADD_LIBRARY(${PROJECT_NAME} STATIC ${HEADERS} ${SOURCES})
    ADD_DEFINITIONS("-DUISE_DESKTOP_EXPORT=")
ELSE (UISE_DESKTOP_STATIC)
    MESSAGE(STATUS "Building shared uise-desktop library")
    ADD_LIBRARY(${PROJECT_NAME} SHARED ${HEADERS} ${SOURCES})
    ADD_DEFINITIONS("-DUISE_DESKTOP_BUILD")
ENDIF(UISE_DESKTOP_STATIC)

TARGET_LINK_LIBRARIES(${PROJECT_NAME} PUBLIC Qt6::Widgets)

IF (UISE_DESKTOP_DEMO)
    ADD_SUBDIRECTORY(demo)
ENDIF (UISE_DESKTOP_DEMO)
